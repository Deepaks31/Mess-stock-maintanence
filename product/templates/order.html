{% extends 'home.html' %}
{% load static %}
{% block title %}Order Page{% endblock %}

{% block extra_css %}
    <!-- Link to custom CSS specific to this page -->
    <link rel="stylesheet" href="{% static 'css/order.css' %}">
{% endblock %}

{% block content %}
    <div class="container mt-4">
        <h2 class="text-center">ONLINE STORE</h2><br><br>
        <form id="orderForm" action="{% url 'order' %}" method="post">
            {% csrf_token %}
            <div class="container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Item name</th>
                            <th>Quantity</th>
                        </tr>
                    </thead>
                    <tbody class="itemList">
                        <tr>
                            <td>
                                <div class="custom-dropdown">
                                    <select class="dropdown-select" id="items" name="items">
                                        <option value="">Select an item</option>
                                        <option value="Tomatoes">Tomatoes</option>
                                        <option value="Potatoes">Potatoes</option>
                                        <option value="Onions">Onions</option>
                                        <option value="Garlic">Garlic</option>
                                        <option value="Ginger">Ginger</option>
                                        <option value="Cilantro">Cilantro</option>
                                        <option value="Egg">Egg</option>
                                        <option value="Mint">Mint</option>
                                        <option value="Green onions">Green onions</option>
                                        <option value="Lentils">Lentils</option>
                                        <option value="Chickpeas">Chickpeas</option>
                                        <option value="Mung beans">Mung beans</option>
                                        <option value="Split peas">Split peas</option>
                                        <option value="Soybeans">Soybeans</option>
                                        <option value="Red lentils">Red lentils</option>
                                        <option value="Green lentils">Green lentils</option>
                                        <option value="Pinto beans">Pinto beans</option>
                                        <option value="Milk">Milk</option>
                                        <option value="Cheese">Cheese</option>
                                        <option value="Butter">Butter</option>
                                        <option value="Almond milk">Almond milk</option>
                                        <option value="Bread">Bread</option>
                                        <option value="Rice">Rice</option>
                                    </select>
                                </div>
                            </td>
                            <td><input type="number" class="quantity" name="quantity" id="quantity" max="100" min="1" value="1" style="text-align:center;" required></td>
                            <td><button type="button" class="btn btn-primary" onclick="addItemAndDisplay()">Add</button></td>
                        </tr>
                        <tr>
                            <td>
                                <input type="date" id="neededDate" name="needed_date">
                            </td>
                            <td><button type="submit" class="btn btn-dark">Submit</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="container mt-4">
                <h2 class="text-center">PRODUCT INFORMATION</h2>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Item name</th>
                            <th>Quantity</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="saved_items">
                        {% for item in items %}
                        <tr>
                            <td>{{ item.name }}</td>
                            <td>{{ item.quantity }}</td>
                            <td><button type="button" class="btn btn-danger" onclick="removeItem(this)">Remove</button></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </form>
    </div>
{% endblock %}

{% block extra_js %}
    <!-- Link to custom JS specific to this page -->
    <script src="{% static 'js/order.js' %}"></script>
    
    <!-- Link to jQuery -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    
    <!-- Link to Select2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
    
    <!-- Initialize Select2 -->
    <script>
        $(document).ready(function() {
            $('#items').select2({
                placeholder: 'Select an item',
                width: '100%'
            });
        });
    </script>
{% endblock %}
